import{g as getSlideTransformEl,c as createElement,e as elementTransitionEnd}from"../shared/utils.min.mjs";function createShadow(e,t,s){const a=`swiper-slide-shadow${s?`-${s}`:""}${e?` swiper-slide-shadow-${e}`:""}`,r=getSlideTransformEl(t);let i=r.querySelector(`.${a.split(" ").join(".")}`);return i||(i=createElement("div",a.split(" ")),r.append(i)),i}function effectInit(e){const{effect:t,swiper:s,on:a,setTranslate:r,setTransition:i,overwriteParams:n,perspective:l,recreateShadows:o,getEffectParams:d}=e;let c;a("beforeInit",(()=>{if(s.params.effect!==t)return;s.classNames.push(`${s.params.containerModifierClass}${t}`),l&&l()&&s.classNames.push(`${s.params.containerModifierClass}3d`);const e=n?n():{};Object.assign(s.params,e),Object.assign(s.originalParams,e)})),a("setTranslate",(()=>{s.params.effect===t&&r()})),a("setTransition",((e,a)=>{s.params.effect===t&&i(a)})),a("transitionEnd",(()=>{if(s.params.effect===t&&o){if(!d||!d().slideShadows)return;s.slides.forEach((e=>{e.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach((e=>e.remove()))})),o()}})),a("virtualUpdate",(()=>{s.params.effect===t&&(s.slides.length||(c=!0),requestAnimationFrame((()=>{c&&s.slides&&s.slides.length&&(r(),c=!1)})))}))}function effectTarget(e,t){const s=getSlideTransformEl(t);return s!==t&&(s.style.backfaceVisibility="hidden",s.style["-webkit-backface-visibility"]="hidden"),s}function effectVirtualTransitionEnd(e){let{swiper:t,duration:s,transformElements:a,allSlides:r}=e;const{activeIndex:i}=t;if(t.params.virtualTranslate&&0!==s){let e,s=!1;e=r?a:a.filter((e=>{const s=e.classList.contains("swiper-slide-transform")?(e=>{if(!e.parentElement)return t.slides.filter((t=>t.shadowRoot&&t.shadowRoot===e.parentNode))[0];return e.parentElement})(e):e;return t.getSlideIndex(s)===i})),e.forEach((e=>{elementTransitionEnd(e,(()=>{if(s)return;if(!t||t.destroyed)return;s=!0,t.animating=!1;const e=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});t.wrapperEl.dispatchEvent(e)}))}))}}function EffectCards(e){let{swiper:t,extendParams:s,on:a}=e;s({cardsEffect:{slideShadows:!0,rotate:!0,perSlideRotate:2,perSlideOffset:8}});effectInit({effect:"cards",swiper:t,on:a,setTranslate:()=>{const{slides:e,activeIndex:s,rtlTranslate:a}=t,r=t.params.cardsEffect,{startTranslate:i,isTouched:n}=t.touchEventsData,l=a?-t.translate:t.translate;for(let o=0;o<e.length;o+=1){const d=e[o],c=d.progress,f=Math.min(Math.max(c,-4),4);let p=d.swiperSlideOffset;t.params.centeredSlides&&!t.params.cssMode&&(t.wrapperEl.style.transform=`translateX(${t.minTranslate()}px)`),t.params.centeredSlides&&t.params.cssMode&&(p-=e[0].swiperSlideOffset);let m=t.params.cssMode?-p-t.translate:-p,h=0;const w=-100*Math.abs(f);let u=1,E=-r.perSlideRotate*f,S=r.perSlideOffset-.75*Math.abs(f);const b=t.virtual&&t.params.virtual.enabled?t.virtual.from+o:o,$=(b===s||b===s-1)&&f>0&&f<1&&(n||t.params.cssMode)&&l<i,M=(b===s||b===s+1)&&f<0&&f>-1&&(n||t.params.cssMode)&&l>i;if($||M){const e=(1-Math.abs((Math.abs(f)-.5)/.5))**.5;E+=-28*f*e,u+=-.5*e,S+=96*e,h=-25*e*Math.abs(f)+"%"}if(m=f<0?`calc(${m}px ${a?"-":"+"} (${S*Math.abs(f)}%))`:f>0?`calc(${m}px ${a?"-":"+"} (-${S*Math.abs(f)}%))`:`${m}px`,!t.isHorizontal()){const e=h;h=m,m=e}const T=f<0?""+(1+(1-u)*f):""+(1-(1-u)*f),g=`\n        translate3d(${m}, ${h}, ${w}px)\n        rotateZ(${r.rotate?a?-E:E:0}deg)\n        scale(${T})\n      `;if(r.slideShadows){let e=d.querySelector(".swiper-slide-shadow");e||(e=createShadow("cards",d)),e&&(e.style.opacity=Math.min(Math.max((Math.abs(f)-.5)/.5,0),1))}d.style.zIndex=-Math.abs(Math.round(c))+e.length;effectTarget(r,d).style.transform=g}},setTransition:e=>{const s=t.slides.map((e=>getSlideTransformEl(e)));s.forEach((t=>{t.style.transitionDuration=`${e}ms`,t.querySelectorAll(".swiper-slide-shadow").forEach((t=>{t.style.transitionDuration=`${e}ms`}))})),effectVirtualTransitionEnd({swiper:t,duration:e,transformElements:s})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0,virtualTranslate:!t.params.cssMode})})}export{EffectCards as default};
//# sourceMappingURL=effect-cards.min.mjs.map